@startuml
!theme plain

skinparam class {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}

skinparam package {
    BackgroundColor White
    BorderColor Black
}

title Классовая диаграмма системы тестирования

package "Пользователи и ответы" {
  class User {
    - fio: string
    - faculty: string
    - groupNum: int
    --
    + User()
    + User(fio, faculty, groupNum)
    + User(copy: User)
    + ~User()
    + getFio(): string
    + getFaculty(): string
    + getGroupNum(): int
    + setFio(newFio: string): void
    + setFaculty(newFaculty: string): void
    + setGroupNum(newGroupNum: int): void
  }

  class Answer {
    - date: string
    - testName: string
    --
    + Answer()
    + Answer(fio, faculty, groupNum, date, testName)
    + Answer(copy: Answer)
    + ~Answer()
    + getDate(): string
    + getTestName(): string
    + setDate(newDate: string): void
    + setTestName(newTestName: string): void
  }

  class Result {
    - result: float
    - passed: bool
    --
    + Result()
    + Result(fio, faculty, groupNum, date, testName, result)
    + Result(copy: Result)
    + ~Result()
    + getResult(): float
    + getPassed(): bool
    + setResult(newResult: float): void
    + display(): void
    + displayTableHeader(): static void
    + displayTableFooter(): static void
    + displayTableRow(index: int): void
    + saveToFile(file: ofstream, index: int): void
  }
}

package "Вопросы" {
  interface IQuestion {
    + ~IQuestion()
    + displayQuestion(): void
    + checkAnswer(userAnswer: int): bool
    + getScores(): int
    + getType(): string
    + getQuestionText(): string
    + getVariantsCount(): int
  }

  class "Question<TQuestion, TVariants>" as Question {
    - MAX_VARIANTS: static const int
    - questionText: TQuestion
    - variants: TVariants[]
    - variantsCount: int
    - rightVariantNumber: int
    - scores: int
    - typeName: string
    --
    + Question()
    + Question(questionText, variantsArray, varCount, rightVariant, scores, type)
    + Question(copy: Question)
    + ~Question()
    + getQuestionText(): string
    + getVariantsCount(): int
    + getVariant(index: int): TVariants
    + getRightVariantNumber(): int
    + getScores(): int
    + getType(): string
    + setQuestionText(newQuestionText: TQuestion): void
    + setVariants(newVariants: TVariants[], count: int): void
    + setRightVariantNumber(newRightVariantNumber: int): void
    + setScores(newScores: int): void
    + checkAnswer(userAnswer: int): bool
    + displayQuestion(): void
  }
}

package "Тестирование" {
  class Test {
    - MAX_QUESTIONS: static const int
    - MAX_ANSWERS: static const int
    - MAX_RESULTS: static const int
    - MAX_VARIANTS: static const int
    - testName: string
    - testTheme: string
    - questions: IQuestion*[]
    - answers: Answer[]
    - results: Result[]
    - questionCount: int
    - answerCount: int
    - resultCount: int
    --
    + Test()
    + Test(name: string, theme: string)
    + Test(other: Test)
    + operator=(other: Test): Test&
    + ~Test()
    + getTestName(): string
    + getTestTheme(): string
    + getQuestionCount(): int
    + getAnswerCount(): int
    + getResultCount(): int
    + setTestName(name: string): void
    + setTestTheme(theme: string): void
    + addQuestion(question: IQuestion*): bool
    + addAnswer(answer: Answer): bool
    + addResult(result: Result): bool
    + displayTestInfo(): void
    + showMenu(): void
    - addTextQuestion(): void
    - addNumericQuestion(): void
    - displayAllQuestions(): void
    - takeTest(): void
    - displayResults(): void
    - displayResultsTable(): void
    - saveResultsToFile(): void
  }
}

' Наследование
User <|-- Answer
Answer <|-- Result
IQuestion <|.. Question

' Композиция и агрегация
Test *-- "0..*" IQuestion
Test *-- "0..*" Answer
Test *-- "0..*" Result

' Зависимости
Test ..> User
Test ..> Result
Test ..> IQuestion

note right of Test
  Управляет всем процессом
  тестирования: создание вопросов,
  проведение тестов, сбор результатов
end note

note right of Question
  Шаблонный класс
  TQuestion - тип вопроса
  TVariants - тип вариантов ответов
end note

@enduml